# Lifetime, Scope, Visibility and Linkage
有効期間、スコープ、可視性、リンケージ

## Lifetime
有効期間：
変数または関数が存在するプログラムが実行中である期間
識別子のストレージ存続期間で、その有効期間が決まる。


staticで宣言された識別子:
静的ストレージ存続期間がある。

静的ストレージ存続期間(グローバルとも言う)のある識別子:
プログラムの実行期間中、ストレージと定義済みの値を持っている。ストレージは予約されているため。識別子に格納されている値はプログラムの起動前に一度だけ初期化される。


staticストレージクラス指定子なしで宣言される識別子:
関数の内部で宣言されている場合は、自動ストレージ存続期間がある。

自動ストレージ存続期間:
識別子が定義または宣言されたブロックないでのみストレージと定義済みの値を持っている。

自動識別子:
プログラムがそのブロックに入るたびに新しいストレージが割り当てられる。
プログラムがブロックを終了するとストレージ(および値)を失う。

リンケージのない関数で宣言された識別子:
自動ストレージ存続期間がある。



## Scope, Visibility
スコープおよび可視性

識別子の可視性:
参照できるプログラムの部分(スコープ)が決定される。

識別子:
表示されるファイル、関数、ブロック、関数のプロトタイプに制限される可能性があるスコープに含まれるプログラムの一部でのみ表示できる。

識別子のスコープ:
その名前が使用できるプログラムの一部
→構文スコープとの呼ばれる。

スコープの種類:
- 関数
- ファイル
- ブロック
- 関数プロトタイプ


ラベル以外のすべての識別子:
宣言が行われるレベルによって決定されるスコープがある。
スコープのそれぞれの種類に対する規則はプログラム内の識別子の可視性を制御する。


ファイルスコープ:
任意のブロック、またはパラメーターのリストの外側に記述される。
宣言の後の翻訳単位内の任意の場所からアクセスできる。
ファイルスコープを服務識別子名は、多くの場合”フローバル”または"外部"と呼ばれる。
グローバル識別子のスコープ: 定義または宣言の時点からはじまる。翻訳単位の松尾で終了する。

関数スコープ：
ラベルは関数スコープを持つ識別子の唯一の種類。
ラベルはステートメントで使用することで暗黙的に宣言される。
ラベル名は関数内で一意である必要がある。

ブロックスコープ:
ブロック内、関数定義の仮パラメータ宣言のリスト内に記述される。
宣言または定義から、その宣言または定義を含むブロックの末尾は参照可能。
そのスコープは、そのブロックと、そのブロックに入れ子になったすべてのブロックに制限され、関連するブロックを閉じる中かっこで終了する。
→ローカル変数と呼ばれることがある。

関数プロトタイプのスコープ:
関数プロトタイプのパラメータ宣言のリスト内に記述される。
スコープは関数宣言子の末尾で終了する。



## Linkage
リンケージ: 識別子でさまざまなスコープのさまざまな識別子を参照できる。
異なるスコープで宣言された識別子、または同じスコープで複数回宣言された識別子は、リンケージと呼ばれるプロセスによって同じ識別子または関数を参照することができる。
リンケージによって、識別子を参照できるプログラムの部分が決定される。


三種類のリンケージ：
- 内部リンケージ
- 外部リンケージ
- リンケージなし


内部リンケージ:
オブジェクトまたは関数のファイルスコープ識別子の宣言にstaticが含まれている場合、その識別子には内部リンケージがある。
それ以外の場合は外部リンケージを持つ。

外部リンケージ：
IDのファイルスコープレベルの最初の宣言でstaticストレージクラス識別子を使用していない場合、オブジェクトに外部リンケージがある。

関数のIDの宣言にstorage-class-specifierがない場合:
リンケージはexturnで宣言されている場合と同じように決定される。
オブジェクトのID宣言にソースファイルスコープがある、storage-class-specifierがふくまれてない場合、リンケージは外部になる。

外部リンケージを持つ識別子の名前:
外部リンケージを持つ同じ名前の他の宣言で指定されるものと同じ関数またはデータオブジェクトの指定する。
2つの宣言を同じ翻訳単位または異なる翻訳単位に配置できる。
オブジェクトまたは関数にフローばる有効期限もあうる場合、オブジェクトまたは関数はプログラム全体で共有される。


リンケージなし:
次の識別子にはリンケージがありません。
- オブジェクトまたは関数以外として宣言された識別子
- 関数パラメーターとして宣言された識別子
- extern ストレージ クラス指定子なしで宣言されたオブジェクトのブロック スコープ指定子

識別子にリンケージがない場合、同じスコープ レベルで同じ名前を再度 (宣言子または型指定子で) 宣言すると、シンボルの再定義エラーが発生する。